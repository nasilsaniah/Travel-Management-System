CREATE TABLE  "BOOKING" 
   (	"BOOKINGID" NUMBER(4,0) NOT NULL ENABLE, 
	"TRAVELLER_NAME" VARCHAR2(10) NOT NULL ENABLE, 
	"USERNAME" VARCHAR2(10) NOT NULL ENABLE, 
	"BOOKING_DATE" VARCHAR2(50) NOT NULL ENABLE, 
	"HID" NUMBER(4,0), 
	"TRAVELLER_DETAILS" VARCHAR2(100), 
	"HOTEL_ID" NUMBER(4,0), 
	"BOOKING__DETAILS" VARCHAR2(200), 
	"UPD" NUMBER(7,0), 
	 CONSTRAINT "BOOKING_PK" PRIMARY KEY ("BOOKINGID") ENABLE
   ) ;

CREATE OR REPLACE TRIGGER  "BOOKING_T1" 
BEFORE
insert on "BOOKING"
for each row
begin
SELECT book_s1.NEXTVAL
  INTO   :new.bookingid
  FROM   dual;
SELECT 0
  INTO   :new.upd
  FROM   dual;
end;
/
ALTER TRIGGER  "BOOKING_T1" ENABLE;

CREATE OR REPLACE TRIGGER  "BOOKING_T2" 
AFTER
update on "BOOKING"
for each row
begin
DELETE FROM holiday
WHERE (NUMBER_OF_PACKAGES = 0); 
    

end;
/
ALTER TRIGGER  "BOOKING_T2" ENABLE;

CREATE TABLE  "FEEDBACK" 
   (	"FEEDB" VARCHAR2(70), 
	"USERNAME" VARCHAR2(50) NOT NULL ENABLE, 
	 CONSTRAINT "FEEDBACK_CON" PRIMARY KEY ("FEEDB", "USERNAME") ENABLE
   ) ;

CREATE TABLE  "HOLIDAY" 
   (	"DESTINATION" VARCHAR2(20) NOT NULL ENABLE, 
	"SOURCE" VARCHAR2(20) NOT NULL ENABLE, 
	"DATE_OF_TRAVEL" VARCHAR2(50) NOT NULL ENABLE, 
	"DURATION" VARCHAR2(20) NOT NULL ENABLE, 
	"PRICE" NUMBER(10,0) NOT NULL ENABLE, 
	"HID" NUMBER(4,0) NOT NULL ENABLE, 
	"TID" NUMBER(4,0) NOT NULL ENABLE, 
	"DETAILS" VARCHAR2(200), 
	"NUMBER_OF_PACKAGES" NUMBER(10,0), 
	 CONSTRAINT "HOLIDAY_PK" PRIMARY KEY ("HID") ENABLE
   ) ;

CREATE OR REPLACE TRIGGER  "HOLIDAY_T1" 
BEFORE
insert on "HOLIDAY"
for each row
begin
SELECT hol_seq.NEXTVAL
  INTO   :new.HID
  FROM   dual;
end;
/
ALTER TRIGGER  "HOLIDAY_T1" ENABLE;

CREATE TABLE  "HOTEL" 
   (	"HOTEL_NAME" VARCHAR2(30), 
	"AVAILABLE_ROOMS" NUMBER(10,0), 
	"PRICE_PERDAY" NUMBER(20,0), 
	"EXTRA_BED_PRICE" NUMBER(20,0), 
	"NUMBER_OF_ADULTS_IN_ROOM" NUMBER(20,0), 
	"CITY" VARCHAR2(70), 
	"HOTEL_ID" NUMBER(4,0), 
	"DESCRIPTION" VARCHAR2(100), 
	 CONSTRAINT "HOTEL_PK" PRIMARY KEY ("HOTEL_ID") ENABLE
   ) ;

CREATE OR REPLACE TRIGGER  "HOTEL_T1" 
BEFORE
insert on "HOTEL"
for each row
begin
SELECT hot_s1.NEXTVAL
  INTO   :new.HOTEL_ID
  FROM   dual;
end;
/
ALTER TRIGGER  "HOTEL_T1" ENABLE;

CREATE TABLE  "TRAVEL_AGENCY" 
   (	"AGENCY_NAME" VARCHAR2(20) NOT NULL ENABLE, 
	"AREA" VARCHAR2(20) NOT NULL ENABLE, 
	"CITY" VARCHAR2(20) NOT NULL ENABLE, 
	"STATE" VARCHAR2(20) NOT NULL ENABLE, 
	"PHONE_NO" NUMBER(10,0) NOT NULL ENABLE, 
	"TID" NUMBER(4,0) NOT NULL ENABLE, 
	 CONSTRAINT "TRAVEL_AGENCY_PK" PRIMARY KEY ("TID") ENABLE, 
	 CONSTRAINT "TRAVEL_AGENCY_UK1" UNIQUE ("AGENCY_NAME") ENABLE
   ) ;

CREATE OR REPLACE TRIGGER  "TRAVEL_AGENCY_T1" 
BEFORE
insert on "TRAVEL_AGENCY"
for each row
begin

  SELECT TA_seq.NEXTVAL
  INTO   :new.TID
  FROM   dual;

end;
/
ALTER TRIGGER  "TRAVEL_AGENCY_T1" ENABLE;

CREATE TABLE  "USERS" 
   (	"USERNAME" VARCHAR2(50) NOT NULL ENABLE, 
	"PASSWORD" VARCHAR2(10), 
	"PASSWORD_QUESTION" VARCHAR2(50) NOT NULL ENABLE, 
	"PASSWORD_ANSWER" VARCHAR2(10) NOT NULL ENABLE, 
	"EMAILID" VARCHAR2(20) NOT NULL ENABLE, 
	"MOBLIENO" NUMBER(10,0) NOT NULL ENABLE, 
	 CONSTRAINT "USERS_PK" PRIMARY KEY ("USERNAME") ENABLE
   ) ;
